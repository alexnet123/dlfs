## üì¶ –ß—Ç–æ —Ç–∞–∫–æ–µ `libstdc++`?

Libstdc++ ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ C++. –û–Ω–∞ –Ω—É–∂–Ω–∞ –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∫–æ–¥–∞ C++ (—á–∞—Å—Ç—å GCC –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ C++), –∫–æ–≥–¥–∞ –º—ã —Å–æ–±–∏—Ä–∞–ª–∏ GCC-–ü—Ä–æ—Ö–æ–¥ 1, –Ω–∞–º –ø—Ä–∏—à–ª–æ—Å—å –æ—Ç–ª–æ–∂–∏—Ç—å –µ—ë —É—Å—Ç–∞–Ω–æ–≤–∫—É, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Glibc, –∫–æ—Ç–æ—Ä–æ–π –µ—â–µ –Ω–µ –±—ã–ª–æ –≤ —Ü–µ–ª–µ–≤–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ. 

Libstdc++ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ GCC. –°–Ω–∞—á–∞–ª–∞ –≤—ã –¥–æ–ª–∂–Ω—ã —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∞—Ä—Ö–∏–≤ GCC –∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥ gcc-14.2.0

## üîß –ó–∞—á–µ–º —ç—Ç–æ –¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å?

–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å:

- —Ä–∞–±–æ—á–∏–π –∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä
    
- —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —è–¥—Ä–∞
    
- —Ä–∞–±–æ—á–∞—è `glibc`
    

‚Üí –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è **–¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É C++** —á–µ—Ä–µ–∑ `libstdc++`.

---

### üîπ 1. –†–∞—Å–ø–∞–∫—É–µ–º –∞—Ä—Ö–∏–≤ –∏ —Å–æ–∑–¥–∞–¥–∏–º –Ω–æ–≤—É—é –ø–∞–ø–∫—É –¥–ª—è —Å–±–æ—Ä–∫–∏.

```bash
cd $DLFS/sources
tar -xf gcc-14.2.0.tar.xz
cd gcc-14.2.0
mkdir -v build && cd build
```


### üîπ 3. –ó–∞–ø—É—Å—Ç–∏ `configure` –¥–ª—è —Å–±–æ—Ä–∫–∏ —Ç–æ–ª—å–∫–æ `libstdc++`:

```bash
../libstdc++-v3/configure \
  --host=$DLFS_TGT \
  --build=$(../config.guess) \
  --prefix=/usr \
  --disable-multilib \
  --disable-nls \
  --disable-libstdcxx-pch \
  --with-gxx-include-dir=/tools/$DLFS_TGT/include/c++/14.2.0
```

### `--host=$LFS_TGT`

**–ì–æ–≤–æ—Ä–∏—Ç, –¥–ª—è –∫–∞–∫–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –º—ã —Å–æ–±–∏—Ä–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É.**

- `$DLFS_TGT` ‚Äî —ç—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤–∏–¥–∞: `x86_64-dlfs-linux-gnu`
    
- –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã **–∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º** (—Å–æ–±–∏—Ä–∞–µ–º –¥–ª—è –±—É–¥—É—â–µ–π DLFS-—Å–∏—Å—Ç–µ–º—ã, –Ω–µ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º—ã)
    

> üîß –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–∞–Ω–µ–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–π –∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä `x86_64-dlfs-linux-gnu-g++`

---

### `--build=$(../config.guess)`

###### üîç –ß—Ç–æ –¥–µ–ª–∞–µ—Ç `../config.guess`
–≠—Ç–æ **bash-—Å–∫—Ä–∏–ø—Ç**, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **—Ç–µ–∫—É—â—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É —Å–±–æ—Ä–∫–∏** –≤ –≤–∏–¥–µ "—Å–∏—Å—Ç–µ–º–Ω–æ–π —Ç—Ä–∏–∞–¥—ã" (triplet), –Ω–∞–ø—Ä–∏–º–µ—Ä:

```
[root@1ab6670ccfbd build]# ../config.guess
x86_64-pc-linux-gnu
```


> ‚ö†Ô∏è –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏ –∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª—è—Ü–∏–∏!

---

### `--prefix=/usr`

**–£–∫–∞–∑—ã–≤–∞–µ—Ç, –∫—É–¥–∞ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `$LFS`.**

- –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –ø–æ–ø–∞–¥—ë—Ç –≤: `$DLFS/usr`
    
- –≠—Ç–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤ DLFS-—Å–∏—Å—Ç–µ–º–µ
    

---

### `--disable-multilib`

**–û—Ç–∫–ª—é—á–∞–µ—Ç —Å–±–æ—Ä–∫—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º—É–ª—å—Ç–∏–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 32-–±–∏—Ç –∏ 64-–±–∏—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ).**

- –ù–∞–º —ç—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ ‚Äî –º—ã —Å–æ–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–æ–¥ –æ–¥–Ω—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (`x86_64`)
    
- –≠—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç —Å–±–æ—Ä–∫—É –∏ —É–º–µ–Ω—å—à–∞–µ—Ç –æ–±—ä—ë–º —Ñ–∞–π–ª–æ–≤
    

---

### `--disable-nls`

**–û—Ç–∫–ª—é—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É "Native Language Support" ‚Äî –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏.**

- –ù–∞–º –ø–æ–∫–∞ –Ω–µ –Ω—É–∂–Ω—ã –ø–µ—Ä–µ–≤–æ–¥—ã —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏
    
- –≠—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –∏ —É–ø—Ä–æ—â–∞–µ—Ç —Å–±–æ—Ä–∫—É
    

---

### `--disable-libstdcxx-pch`

**–û—Ç–∫–ª—é—á–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é PCH (–ø—Ä–µ–¥–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤).**

- –í—Ä–µ–º–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —ç—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ
    
- –£–º–µ–Ω—å—à–∞–µ—Ç –æ–±—ä–µ–º, —É—Å–∫–æ—Ä—è–µ—Ç —Å–±–æ—Ä–∫—É
    

---

### `--with-gxx-include-dir=/tools/$DLFS_TGT/include/c++/14.2.0`

**–Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫—É–¥–∞ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã C++ (`iostream`, `vector`, `string` –∏ —Ç.–¥.).**

–ë–∏–±–ª–∏–æ—Ç–µ–∫–æ–π C++ –¥–ª—è DLFS, —ç—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é, –≤ –∫–æ—Ç–æ—Ä–æ–º –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä C++ ($DLFS_TGT-g++) –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –≤–∫–ª—é—á–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã C++. –ü—Ä–∏ –æ–±—ã—á–Ω–æ–π —Å–±–æ—Ä–∫–µ —ç—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ Libstdc++ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ configure –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–∫–∞–∑–∞–Ω–∞ —è–≤–Ω–æ. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä C++ –¥–æ–±–∞–≤–∏—Ç –ø—É—Ç—å sysroot $DLFS (—É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–∏ —Å–±–æ—Ä–∫–µ GCC –ü—Ä–æ—Ö–æ–¥ 1) –∫ –ø—É—Ç–∏ –ø–æ–∏—Å–∫–∞ include-—Ñ–∞–π–ª–æ–≤,
–ø–æ—ç—Ç–æ–º—É —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–Ω –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å –≤ $LFS/tools/$DLFS_TGT/include/c++/14.2.0 . –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π DESTDIR (–≤ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–π –Ω–∏–∂–µ –∫–æ–º–∞–Ω–¥–µ make install) –∏ —ç—Ç–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ —Ç—É–¥–∞.
### üîπ 4. –°–±–æ—Ä–∫–∞

```bash
bash -c "$MAKE_CMD"
```

---

### üîπ 5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ LFS

```bash
make DESTDIR=$DLFS install
```

> `DESTDIR=$DLFS` ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å—ë –≤ **–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**, –∞ –Ω–µ –≤ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º—É

---

### üîπ 6. –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö `.la` —Ñ–∞–π–ª–æ–≤ (–æ–Ω–∏ –º–æ–≥—É—Ç –º–µ—à–∞—Ç—å –ø–æ–∑–∂–µ)

```bash
rm -v $DLFS/usr/lib/lib{stdc++{,exp,fs},supc++}.la
```

---
## –û—á–∏—Å—Ç–∫–∞

```bash
rm -rf $DLFS/sources/gcc-14.2.0
```


