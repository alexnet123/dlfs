
–£—Ç–∏–ª–∏—Ç–∞ `file` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞ –ø–æ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É. –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–±–æ—Ä–∫–∏ DLFS –æ–Ω–∞ —Ç–∞–∫–∂–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤ —Å–∏–≥–Ω–∞—Ç—É—Ä, –ø–æ—ç—Ç–æ–º—É —Ç—Ä–µ–±—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –Ω–∞ —Ö–æ—Å—Ç–µ –±—ã–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ **—Ç–∞ –∂–µ –≤–µ—Ä—Å–∏—è**, —á—Ç–æ –∏ —Ç–∞, –∫–æ—Ç–æ—Ä—É—é –º—ã —Å–æ–±–∏—Ä–∞–µ–º. –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –º—ã **–≤—Ä–µ–º–µ–Ω–Ω–æ —Å–æ–±–∏—Ä–∞–µ–º —Å–≤–æ—é `file`** –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ—ë –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ä—Å–∏–∏.

---

## üîπ 1. –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ `file`

–°–æ–∑–¥–∞—ë–º –æ—Ç–¥–µ–ª—å–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å–±–æ—Ä–∫–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é `file`, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫:

```bash
cd $DLFS/sources/
tar -xf file-5.45.tar.gz
cd file-5.45
mkdir build
pushd build
../configure \
  --disable-bzlib \
  --disable-libseccomp \
  --disable-xzlib \
  --disable-zlib
make
popd
```

### üìå –ü–æ—è—Å–Ω–µ–Ω–∏—è:

- `--disable-bzlib`
    
- `--disable-libseccomp`
    
- `--disable-xzlib`
    
- `--disable-zlib`
    

–≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã **–æ—Ç–∫–ª—é—á–∞—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º—ã**, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã **–Ω–µ–ø–æ–ª–Ω–æ—Å—Ç—å—é** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å—Ç—å `.so`, –Ω–æ –Ω–µ—Ç `.h`). –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç –æ—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏.

---

## üîπ 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–±–æ—Ä–∫–∏ `file`

–¢–µ–ø–µ—Ä—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å–±–æ—Ä–∫—É `file`, –∫–∞–∫ –∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º—ã–π –ø–∞–∫–µ—Ç:

```bash
./configure \
  --prefix=/usr \
  --host=$DLFS_TGT \
  --build=$(./config.guess)
```

### üìå –ü–æ—è—Å–Ω–µ–Ω–∏—è:

- `--prefix=/usr` ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—É—Ç—å `/usr`.
    
- `--host=$DLFS_TGT` ‚Äî –≥–æ–≤–æ—Ä–∏–º, —á—Ç–æ –±—É–¥–µ–º —Å–æ–±–∏—Ä–∞—Ç—å –¥–ª—è —Å–∏—Å—Ç–µ–º—ã DLFS.
    
- `--build=$(./config.guess)` ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Ö–æ—Å—Ç-–º–∞—à–∏–Ω—ã.
    

---

## üîπ 3. –ö–æ–º–ø–∏–ª—è—Ü–∏—è —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º `file`

–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–±—Ä–∞–Ω–Ω—É—é –≤—Ä–µ–º–µ–Ω–Ω—É—é —É—Ç–∏–ª–∏—Ç—É `file`, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –±–∞–∑—É —Å–∏–≥–Ω–∞—Ç—É—Ä:

```bash
make FILE_COMPILE=$(pwd)/build/src/file
```

### üìå –ó–∞—á–µ–º —ç—Ç–æ:

`file` –Ω—É–∂–µ–Ω **–≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏ —Å–∞–º–æ–≥–æ –ø–∞–∫–µ—Ç–∞**. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π `file`, –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π. –ú—ã –ø–æ–¥–º–µ–Ω—è–µ–º –µ–≥–æ –Ω–∞ —Å–æ–±—Ä–∞–Ω–Ω—É—é –Ω–∞–º–∏ –≤—Ä–µ–º–µ–Ω–Ω—É—é –∫–æ–ø–∏—é.

---

## üîπ 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ–±—Ä–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç –≤ `$DLFS`:

```bash
make DESTDIR=$DLFS install
```

- `DESTDIR=$DLFS` ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ **–≤—Å—ë –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–µ –≤ —Ç–µ–∫—É—â—É—é —Å–∏—Å—Ç–µ–º—É, –∞ –≤ –∫–∞—Ç–∞–ª–æ–≥ LFS**.
    

---

## üîπ 5. –£–¥–∞–ª–µ–Ω–∏–µ `libmagic.la`

`.la` —Ñ–∞–π–ª—ã (`libtool archives`) **–Ω–µ –Ω—É–∂–Ω—ã** –≤ –∫—Ä–æ—Å—Å-—Å–±–æ—Ä–∫–µ –∏ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø–æ–∑–∂–µ, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –æ–Ω–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Ö–æ—Å—Ç-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
rm -v $DLFS/usr/lib/libmagic.la
```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- `file`, `libmagic` –∏ –±–∞–∑–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω—ã –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ `$DLFS`.
    
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Å–±–æ—Ä–∫–∏, –∏—Å–∫–ª—é—á–∞—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ö–æ—Å—Ç–∞.
    

---
## –û—á–∏—Å—Ç–∫–∞

```bash
rm -rf $DLFS/sources/file-5.45
```
