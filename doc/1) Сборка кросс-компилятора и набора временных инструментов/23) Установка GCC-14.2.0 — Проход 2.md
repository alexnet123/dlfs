
**GCC** (GNU Compiler Collection) ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –¥–ª—è C –∏ C++, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Å–±–æ—Ä–∫–∏ –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º –≤ DLFS.

## üì¶ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ö–∞–∫ –∏ –≤ –ø–µ—Ä–≤–æ–º –ø—Ä–æ—Ö–æ–¥–µ, GCC —Ç—Ä–µ–±—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫:

```bash
cd $DLFS/sources/
rm -rf gcc-14.2.0
tar -xf gcc-14.2.0.tar.xz 
cd gcc-14.2.0

tar -xf ../mpfr-4.2.1.tar.xz
mv -v mpfr-4.2.1 mpfr

tar -xf ../gmp-6.3.0.tar.xz
mv -v gmp-6.3.0 gmp

tar -xf ../mpc-1.3.1.tar.gz
mv -v mpc-1.3.1 mpc
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è x86_64

–ù–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ `x86_64` –∏–∑–º–µ–Ω–∏—Ç–µ –ø—É—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ 64-–±–∏—Ç–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫:

```bash
case $(uname -m) in
  x86_64)
    sed -e '/m64=/s/lib64/lib/' -i.orig gcc/config/i386/t-linux64
  ;;
esac
```

---

## üßµ –í–∫–ª—é—á–µ–Ω–∏–µ POSIX-–ø–æ—Ç–æ–∫–æ–≤

–ü–æ–∑–≤–æ–ª–∏–º `libgcc` –∏ `libstdc++` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `gthr-posix.h`:

```bash
sed '/thread_header =/s/@.*@/gthr-posix.h/' \
  -i libgcc/Makefile.in libstdc++-v3/include/Makefile.in
```

---

## üèóÔ∏è –ö–∞—Ç–∞–ª–æ–≥ —Å–±–æ—Ä–∫–∏

–°–æ–∑–¥–∞–π—Ç–µ –∏ –≤–æ–π–¥–∏—Ç–µ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Å–±–æ—Ä–∫–∏:

```bash
mkdir -v build && cd build
```

üõë **–í–∞–∂–Ω–æ**: –ü–µ—Ä–µ–¥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã `CFLAGS`, `CXXFLAGS`, `LDFLAGS` –∏ —Ç.–ø. —Å–±—Ä–æ—à–µ–Ω—ã!

---

## üß™ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
../configure \
  --build=$(../config.guess) \
  --host=$DLFS_TGT \
  --target=$DLFS_TGT \
  LDFLAGS_FOR_TARGET=-L$PWD/$DLFS_TGT/libgcc \
  --prefix=/usr \
  --with-build-sysroot=$DLFS \
  --enable-default-pie \
  --enable-default-ssp \
  --disable-nls \
  --disable-multilib \
  --disable-libatomic \
  --disable-libgomp \
  --disable-libquadmath \
  --disable-libsanitizer \
  --disable-libssp \
  --disable-libvtv \
  --enable-languages=c,c++
```

### üìå –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –æ–ø—Ü–∏–π:

- `--with-build-sysroot=$LFS` ‚Äî —Å–æ–æ–±—â–∞–µ—Ç —Å–±–æ—Ä–æ—á–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `$DLFS` –∫–∞–∫ –∫–æ—Ä–µ–Ω—å —Å–∏—Å—Ç–µ–º—ã.
    
- `--target=$DLFS_TGT` ‚Äî —Å–±–æ—Ä–∫–∞ –∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –¥–ª—è DLFS.
    
- `LDFLAGS_FOR_TARGET=...` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—â–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `libgcc` –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π.
    
- `--enable-default-pie`, `--enable-default-ssp` ‚Äî –≤–∫–ª—é—á–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (PIE –∏ SSP).
    
- `--disable-*` ‚Äî –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.
    

---

## üõ†Ô∏è –°–±–æ—Ä–∫–∞

```bash
bash -c "$MAKE_CMD"
```

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
make DESTDIR=$DLFS install
```

---

## üîó –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–æ–π —Å—Å—ã–ª–∫–∏ `cc`

–ú–Ω–æ–≥–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `cc` –∫–∞–∫ –∏–º—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ C:

```bash
ln -sv gcc $DLFS/usr/bin/cc
```

---

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —à–∞–≥–æ–≤ GCC –≤—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ—Ö–æ–¥–∞ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ —Å–∏—Å—Ç–µ–º—É `$DLFS`. –¢–µ–ø–µ—Ä—å –≤—ã –≥–æ—Ç–æ–≤—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Å–±–æ—Ä–∫—É —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã.

## –û—á–∏—Å—Ç–∫–∞

```bash
rm -rf $DLFS/sources/gcc-14.2.0
```
